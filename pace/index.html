<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pace</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">

</head>

<body>
  <div>
    <header class="p-3 text-bg-dark fixed-top mb-3">
      <div class="container">
        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
          <a href="./index.html" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
            <div class="fs-2 mb-3">
              <svg xmlns="http://www.w3.org/2000/svg" width="40" height="32" fill="currentColor" class="bi bi-peace"
                viewBox="0 0 16 16">
                <path
                  d="M7.5 1.018a7 7 0 0 0-4.79 11.566L7.5 7.793zm1 0v6.775l4.79 4.79A7 7 0 0 0 8.5 1.018m4.084 12.273L8.5 9.207v5.775a6.97 6.97 0 0 0 4.084-1.691M7.5 14.982V9.207l-4.084 4.084A6.97 6.97 0 0 0 7.5 14.982M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8">
                </path>
              </svg>
              Pace
            </div>
          </a>
  
          <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 ms-4 justify-content-center mb-md-0">
            <li><a href="#" class="nav-link px-2 text-secondary">Home</a></li>
            <li><a href="#" class="nav-link px-2 text-white">Features</a></li>
            <li><a href="#" class="nav-link px-2 text-white">Pricing</a></li>
            <li><a href="#" class="nav-link px-2 text-white">FAQs</a></li>
            <li><a href="#" class="nav-link px-2 text-white">About</a></li>
          </ul>
  
          <div class="text-end">
            <button type="button" class="btn btn-outline-light me-2">Login</button>
            <button type="button" class="btn btn-warning">Sign-up</button>
          </div>
        </div>
      </div>
    </header>
    <div class="w-auto mb-5 bg-dark text-light position-relative">
      <img src="images/pace-guerra.jpg" class="img-fluid opacity-25" alt="..." style="width: 100%; height: 45em;">
      <div class="d-flex justify-content-center">
        <p class="h1 fw-semibold position-absolute" style="top: 0.8em; font-size: 15em;">PACE</p>
        <figcaption class="blockquote-footer position-absolute fs-5" style="top: 25em;">
          Granelli Riccardo, Dario Di Salvatore, Omar Djebali
        </figcaption>
      </div>
    </div>

  </div>

  <div class="carousel slide mb-5" data-bs-theme="dark">
    <div id="contenitoreCarousel" class="d-flex justify-content-center mx-5 gap-5 pb-5 border-bottom">

    </div>
    <div class="d-flex justify-content-between">
      <button id="prec" class="carousel-control-prev" style="width: 3em;">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
      </button>
      <button id="succ" class="carousel-control-next" style="width: 3em;">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
      </button>

    </div>
  </div>

  <div class="container mb-5 pb-5 border-bottom border-dark">
    <p class="display-1 text-uppercase text-center">L'importanza della pace</p>
    <p>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas ullamcorper nisl et aliquam euismod. Morbi sit amet justo at nisl mattis hendrerit quis a enim. Suspendisse tellus mauris, lacinia vitae ligula sed, consectetur egestas elit. Aenean arcu ante, varius at dolor a, tincidunt eleifend leo. Etiam maximus elementum libero. Curabitur imperdiet sem purus, eu varius nibh rhoncus sed. Aliquam id lacus in quam vehicula fermentum nec ac est. Donec quam lacus, tempus sed augue id, aliquam ornare ipsum. Nam nisi orci, porttitor ac tempor sit amet, sodales ac augue. Aenean bibendum lorem id diam aliquet, at venenatis mi tempor. Maecenas quis magna ut orci cursus placerat vitae ac tortor. Duis maximus libero ex, fringilla condimentum libero tincidunt vel. Etiam porta erat quis semper mattis. Donec at eros vitae mi dignissim porta. Vestibulum vitae ex laoreet, tincidunt nunc ac, semper lectus. Nullam in est neque.
      Sed faucibus est dui, sit amet ultricies lorem suscipit hendrerit. Pellentesque in placerat urna, non malesuada nisl. Cras blandit eget odio id venenatis. Phasellus posuere purus a quam tristique luctus. Nulla nec odio leo. Curabitur placerat imperdiet eros fringilla semper. Etiam rhoncus dui non rutrum sollicitudin. Nulla vel maximus purus. Nulla posuere nisi at venenatis viverra. Sed laoreet, risus quis cursus dignissim, metus erat mollis magna, nec ultrices mauris risus at quam. Pellentesque aliquam accumsan tempus. Fusce quis lacus quam. Donec efficitur, urna id faucibus venenatis, libero leo tempor nulla, eget dignissim diam quam sit amet metus.
      Mauris tempus pharetra commodo. Nam nec lacus quis quam placerat maximus vel sagittis dui. Donec nunc lectus, egestas at tellus id, elementum placerat arcu. Maecenas viverra volutpat nunc, eu placerat sem tristique vel. Nulla luctus ac magna sit amet eleifend. Etiam feugiat neque vitae arcu rhoncus, vel faucibus lacus pellentesque. Donec vitae quam pretium, tempor enim sit amet, aliquet tortor. Cras viverra ex non quam pretium iaculis.
      Ut elementum, dui ac sagittis ornare, odio magna mattis tellus, aliquet tempus magna nunc eu quam. Praesent eu aliquam mauris, nec dignissim quam. Pellentesque sed nulla ut mi eleifend eleifend a at lacus. Etiam nec consectetur tortor. Vivamus eu pellentesque eros. Phasellus semper et diam et imperdiet. In ac tempus mauris, sed lacinia magna. Etiam euismod congue lectus, in sodales dolor commodo vitae. Suspendisse facilisis magna at eros ultrices tincidunt. Donec ac velit ornare risus tristique sodales. Morbi ultricies, ipsum sed facilisis maximus, libero quam lacinia nibh, vitae scelerisque quam purus ut est. Vivamus sit amet cursus erat, at aliquam tortor. Fusce facilisis finibus massa.
    </p>
  </div>

  <div class="container">
    <p class="display-1 text-uppercase text-center">Conflitti mondiali</p>
    <p class="">"Neque porro quisquam est qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit..."
      "There is no one who loves pain itself, who seeks after it and wants to have it, simply because it is pain..."</p>
    <div class="d-flex justify-content-center mt-5">
      <div id="regions_div" class="d-block" style="width: 900px; height: 500px;"></div>

    </div>
    
  </div>

  <footer class="py-3 mt-4 text-bg-dark">
    <ul class="nav justify-content-center border-bottom pb-3 mb-3">
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light">Home</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light">Features</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light">Pricing</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light">FAQs</a></li>
      <li class="nav-item"><a href="#" class="nav-link px-2 text-light">About</a></li>
    </ul>
    <p class="text-center text-light-dark">Â© 2025 Itis da Vinci, Inc</p>
  </footer>

  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script>
    class Carta {
      titolo;
      img;
      testo;
      carta;

      constructor(img, titolo, testo) {
        this.titolo = titolo;
        this.img = img;
        this.testo = testo;
        this.carta = null;
      }
      
      creaCarta(principale) {
        this.carta = document.createElement("div");
        this.carta.className = "card";
        if (principale) {
          this.carta.className += " w-80";
          this.carta.style = "height: 26em;";
        }
        else {
          this.carta.className += " w-50";
          this.carta.style = "height: 20em;";
        }

        const overlayImmagine = document.createElement("div");
        overlayImmagine.className = "position-relative";

        const immagine = document.createElement("img");
        immagine.className = "card-img-top w-100 position-relative opacity-50";
        immagine.src = this.img;

        const overlay = document.createElement("div");
        overlay.className = "card-img-overlay position-absolute";
        const h1 = document.createElement("p");
        h1.className = "h1 position-absolute";
        h1.style = "top: 50%; left: 50%; transform: translate(-50%, -50%);"
        h1.innerHTML = this.titolo;
        overlay.appendChild(h1);

        overlayImmagine.appendChild(immagine);
        overlayImmagine.appendChild(overlay);

        const body = document.createElement("div");
        body.className = "card-body";
        const p = document.createElement("p");
        p.className = "card-text";
        p.innerHTML = this.testo;

        body.appendChild(p);
        
        this.carta.appendChild(overlayImmagine);
        this.carta.appendChild(body);

        return this.carta;
      }
    };

    class GestoreCards {
      carte;
      focus;
      contenitore

      constructor(contenitore, carte) {
        this.contenitore = contenitore;
        this.carte = carte;
        this.focus = 0;

        this.generaCards();
      }

      clickPrecedente() {
        if (this.focus == 0) this.focus = this.carte.length-1;
        else this.focus--;

        this.generaCards();
      }
      clickSuccessivo() {
        if (this.focus == this.carte.length-1) this.focus = 0;
        else this.focus++;

        this.generaCards();
      }

      generaCards() {
        this.svuotaContenitore();
        for(let i = 0; i < this.carte.length; i++) {
          let carta = this.carte[i];
          let c = new Carta(carta[0], carta[1], carta[2]);

          this.contenitore.appendChild(c.creaCarta(i == this.focus));
        }
      }

      svuotaContenitore() {
        this.contenitore.innerHTML = "";
      }

    }
    
    class GraficoMondo {
      datiGrezzi;
      datiElaborati;

      chart;
      options;
      data;

      constructor(dati) {
        this.datiGrezzi = dati;
        this.datiElaborati = [];

        this.elaboraDati();
        this.caricaData();

        this.options = {
          colorAxis: {minValue: 0, colors: '#FF0000'},
        };

        this.chart = new google.visualization.GeoChart(document.getElementById('regions_div'));

        this.chart.draw(this.data, this.options);
      }

      esiste(dato) {
        let presente = false;
        for (let i = 0; i < this.datiElaborati.length; i++) {
          if (this.datiElaborati[i][0] == dato[0]) {
            presente = true;
            break;
          }
        }

        return presente;
      }

      caricaData() {
        this.data = new google.visualization.DataTable();
        this.data.addColumn('string', 'Stato');
        this.data.addColumn('number', 'Guerra');
        this.data.addColumn({type:'string', role:'tooltip'}, 'Note');
        
        this.data.addRows(this.datiElaborati);
      }

      elaboraDati() {
        for (let i = 0; i < this.datiGrezzi.length; i++) {
          if (this.esiste(this.datiGrezzi[i])) continue;

          let stessoStato = [];
          for (let j = 0; j < this.datiGrezzi.length; j++)  {
            if (this.datiGrezzi[j][0] == this.datiGrezzi[i][0]) stessoStato.push(j);
          }
          stessoStato.sort((a, b) => this.datiGrezzi[b][1][1] - this.datiGrezzi[a][1][1]);

          let dato = [];
          dato.push(this.datiGrezzi[i][0]);
          dato.push(this.datiGrezzi[stessoStato[0]][1][1]);

          let nota = "";
          for (let j = 0; j < stessoStato.length; j++) {
            if (j != 0) nota += "\n";
            if (this.datiGrezzi[stessoStato[j]][1][1] == 2025) {
              nota += `(${this.datiGrezzi[stessoStato[j]][1][0]} - ${this.datiGrezzi[stessoStato[j]][1][1]}) Attualmente in corso - ${this.datiGrezzi[stessoStato[j]][2]}`;
            }
            else {
              nota += `(${this.datiGrezzi[stessoStato[j]][1][0]} - ${this.datiGrezzi[stessoStato[j]][1][1]}) Finita - ${this.datiGrezzi[stessoStato[j]][2]}`;
            } 
          };
          dato.push(nota);

          this.datiElaborati.push(dato);
        };
      }

    }

    const contenitore = document.getElementById("contenitoreCarousel");
    const btnPrec = document.getElementById("prec");
    const btnSuc = document.getElementById("succ");

    const carte = [
      ["./images/gatto1.jpg", "titolo1", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam id volutpat nulla. Aenean iaculis, enim."],
      ["./images/gatto2.jpg", "titolo2", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam id volutpat nulla. Aenean iaculis, enim."],
      ["./images/gatto3.png", "titolo3", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam id volutpat nulla. Aenean iaculis, enim."],
      ["./images/gatto4.jpg", "titolo4", "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam id volutpat nulla. Aenean iaculis, enim."],
    ];
    const gestore = new GestoreCards(contenitore, carte);

    btnPrec.addEventListener("click", (e) => {
      const bottone = e.currentTarget;
      bottone.blur();

      gestore.clickPrecedente();
    });
    btnSuc.addEventListener("click", (e) => {
      const bottone = e.currentTarget;
      bottone.blur();

      gestore.clickSuccessivo();
    });


    let dati = [
      // In corso
      ['Russia', [2014, 2025], "in guerra con l'Ucraina"],
      ['Ukraine', [2014, 2025], "in guerra con la Russia"],
      ['Israel', [2023, 2025], "in guerra con la Palestina"],
      ['Palestine', [2023, 2025], "in guerra con Israele"],
      ['Sudan', [2023, 2025], "in una guerra civile"],
      ['Myanmar', [2021, 2025], "in una guerra civile"],
      ['Yemen', [2015, 2025], "in stato d'emergenza a causa della violenza di gang"],
      ['Somalia', [1991, 2025], "in una guerra civile"],
      ['CD', [2022, 2025], "in una guerra civile"], // Congo

      // Finite
      ['US', [2001, 2021], "guerra con l'Afghanistan"],
      ['Afghanistan', [2001, 2021], "guerra con gli Stati Uniti"],
      ['Iraq', [2003, 2011], "guerra con gli Stati Uniti"],
      ['Sudan', [2003, 2020], "guerra civile"],
      ['Mexico', [2004, 2010], "guerra tra gang"],
      ['Central African Republic', [2004, 2007], "guerra civile"],
      ['Chad', [2005, 2010], "guerra civile"],
      ['Kenya', [2005, 2008], "guerra civile"],
      ['Sri Lanka', [2006, 2009], "guerra civile"],
      ['Libya', [2011, 2011], "guerra civile"],
      ['', [], ""],
    ];

    google.charts.load('current', {
        'packages':['geochart'],
    });
    google.charts.setOnLoadCallback(() => {
      const mondo = new GraficoMondo(dati);
    });

    // Validazione login
    // salvataggio su json

  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-k6d4wzSIapyDyv1kpU366/PK5hCdSbCRGRCMv+eplOQJWyd1fbcAu9OCUj5zNLiq"
    crossorigin="anonymous"></script>
</body>

</html>